# 2026-01-13 TIL - Node.js 패키지/모듈 + React/Vite 맛보기

## ✅ Today Goal

- Node.js에서 **패키지(npm) / 모듈(CJS, ESM)** 흐름 잡기
- React가 왜 “컴포넌트/선언형/빠른 업데이트”인지 감 잡기
- Vite로 React 앱 생성 & 실행까지 해보기

## 🧠 TL;DR (3줄 요약)

- `npm init` 하면 `package.json`이 생기고, `scripts`로 실행 명령을 “닉네임”처럼 쓸 수 있다.
- Node 모듈은 **CJS(require/module.exports)** 와 **ESM(import/export)** 두 방식이 있고, ESM 쓰려면 설정이 필요하다.
- React는 **state 바꾸면 화면이 바뀌는** 선언형 방식이고, 업데이트를 모아 빠르게 처리하려고 **Virtual DOM** 같은 개념을 쓴다.

## 📌 Key Concepts

### 1) 프로젝트 vs 패키지 (Node.js 기준)

- 정의:
  - 프로젝트: 특정 목적을 가진 프로그램 단위(폴더 단위 느낌)
  - 패키지: Node.js에서 관리하는 프로그램 단위(= `package.json`으로 관리되는 단위)
- 왜 필요함:
  - 의존성(라이브러리) 설치/버전 관리/실행 명령 관리가 편해짐
- 언제 씀:
  - Node 기반 프로젝트면 거의 무조건 시작이 `npm init` 혹은 `npm create ...`

### 2) npm init + package.json + scripts

- 정의:
  - `npm init` → 패키지 정보 입력 → `package.json` 생성/저장
  - `scripts` → 터미널 명령을 “단축키”처럼 등록
- 주의점:
  - 관습적으로 `npm start`는 특별취급이라 `npm run` 없이도 동작(환경에 따라 다를 수 있어서 난 그냥 `npm run start`로 외워둠)

### 3) 모듈 시스템: CJS vs ESM

- 모듈이란?
  - 기능을 파일로 쪼개서 관리하는 것(안 쪼개면 유지보수 지옥… 👹)
  - “API 호출은 한 파일에서 관리” 같은 패턴도 보통 이 이유로 씀
- CJS(CommonJS)
  - 내보내기: `module.exports = {...}`
  - 가져오기: `require("./math")`
- ESM(ES Module, 최신)
  - 내보내기: `export`, `export default`
  - 가져오기: `import ... from ...`
  - Node에서 쓰려면 보통 `package.json`에 `"type": "module"` 설정 필요
  - Node ESM은 import 경로에 확장자(`.js`)를 요구하는 경우가 많음(안 붙이면 “왜 안돼요???” 모드 ON)

### 4) 라이브러리 & 설치 파일들

- `dependencies`: 설치된 라이브러리 목록
- `package-lock.json`: “정확히 이 버전들로 설치했음” 기록(재현성 ↑)
- `node_modules`: 설치된 실제 코드들(용량 폭탄 💣) → Git에 올리지 않음
- `node_modules` 없으면? → `npm i` 한 방이면 다시 생성됨

### 5) React 특징 (오늘 들은 핵심)

- 컴포넌트 기반: UI를 조각조각 나눠 재사용/관리
- 선언형 업데이트: “어떻게 바뀌는지 절차”보다 “상태가 이러면 UI는 이렇게”를 쓰는 방식
- Virtual DOM(오늘의 난제)
  - React가 업데이트들을 모아서 비교(달라진 부분만)하고 DOM 반영을 효율적으로 하려는 컨셉

## 🔎 Example / Code

### 1) package.json scripts로 실행 명령 만들기

```json
{
  "scripts": {
    "start": "node src/index.js"
  }
}
```

`npm run start`

### 2) CJS 예시 (require / module.exports)

`// math.js (CJS) function add(a, b) { return a + b; } function sub(a, b) { return a - b; }  module.exports = { add, sub };`

`// index.js (CJS) const math = require("./math");  console.log(math.add(1, 2)); // 3 console.log(math.sub(1, 2)); // -1`

### 3) ESM 예시 (import / export, export default)

`// package.json {   "type": "module" }`

`// math.js (ESM) export function add(a, b) { return a + b; } export function sub(a, b) { return a - b; }  export default function multiply(a, b) {  return a * b; }`

`// index.js (ESM) import mul, { add, sub } from "./math.js";  console.log(add(1, 2)); // 3 console.log(sub(1, 2)); // -1 console.log(mul(2, 3)); // 6`

### 4) 라이브러리 설치 & 사용 예시

`npm i randomcolor`

`import randomColor from "randomcolor";  console.log(randomColor());`

### 5) Vite로 React 앱 만들고 실행

`npm create vite@latest npm i npm run dev`

## 🧯 Troubleshooting

### 1) “Virtual DOM 이해 못했어요” (나도 처음엔 그랬음…)

- 핵심만 딱:
  
  - **state 바뀜 → UI 다시 그려야 함**
  
  - 근데 매번 DOM을 통째로 갈아엎으면 느림
  
  - 그래서 React는 “이번 UI랑 이전 UI의 차이”를 계산해서 **바뀐 부분만 DOM에 반영**하려고 함

- 한 줄 결론:
  
  - **나는 state만 바꾸면 되고, React가 화면 수정 최적화는 알아서 한다** (개꿀)

## ⏭️ Next

- Vite로 만든 React 프로젝트에서 `App.jsx`에 state 하나 만들어서 버튼 누르면 숫자 바뀌게 해보기

- 같은 예제를 CJS/ESM 두 방식으로 번갈아 실행해보고 차이 체감하기

- `node_modules`, `package-lock.json` 역할을 README에 한 줄로 정리해두기


